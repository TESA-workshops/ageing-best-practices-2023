---
title: "TESA Workshop on ageing"
author: "Chairs: Daniel Ricard (GFC) and Peter Comeau (BIO)"
date: "2023-01-31 to 2023-02-02"
output: beamer_presentation
urlcolor: blue
header-includes:
- \AtBeginDocument{\title[TESA Workshop on age determination]{TESA workshop - Best practices in age determination}}

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
suppressPackageStartupMessages(library(ggplot2))
suppressPackageStartupMessages(library(gulf))
```

## What is TESA?

The purpose of the Technical Expertise in Stock Assessment (TESA) program is to promote stock assessment excellence through organizing national activities that contribute to the development of expertise in stock assessment across DFO.
 
[TESA webpage on GCpedia](https://www.gcpedia.gc.ca/wiki/DFO_Science_TESA_ETES)

## Motivations and steps leading to this workshop

- initial idea proposed to TESA committee back in 2021
- age-based assessments are commonly used in providing science advice
- many new DFO scientists might not be familiar with best practices in fish age determination
- catch-at-age information is a key component of age-based population models

- there is no community of DFO scientists with age determination tasks beyond regional groups


## Land acknowledgment

The city of Moncton is located in traditional [Mi'kmaq territory](https://native-land.ca/maps/territories/mikmaq/)

[Elsipogtog Mi'kmaq cultural centre](https://heritagepathtour.com/)

[Millbrook Cultural & Heritage Centre](https://www.millbrookheritagecentre.ca/)

[Site d’interprétation Micmac de Gespeg](http://www.micmacgespeg.ca/)

[Native Land Digitial](https://native-land.ca/)


## Workshop participants

- potential participants initially identified regionally through TESA regional reps
- our current list of participants is based on those who received and accepted the Outlook meeting request
- snowball effect of having a virtual event, and the fact that we didn't turn anyone down
- please make sure that your presence is correctly noted in the [GitHub README page](https://github.com/TESA-workshops/ageing-best-practices-2023)

- __please make sure that your attendance is correctly documented in the draft workshop proceedings__


```{r participants, include=FALSE}
par.df <- readxl::read_xlsx("../planning/workshop-participants.xlsx", sheet = "for-README", skip=1)
par.df <- par.df[2:nrow(par.df),c(2,4,6,8)]
```

## Workshop participants
Regional breakdown of the `r nrow(par.df)` registered participants 

```{r, results='asis'}
knitr::kable(aggregate(Number~Region,par.df,length))
```

## External experts
\includegraphics[width=0.55\textwidth]{./images/julie.png}

\includegraphics[width=1.0\textwidth]{./images/lisa.png}

## External expert that says hello

\begin{columns}
\column{0.3\textwidth}
\begin{small}
\noindent
Hi Dan and Peter,

As you can see from these photos, I am having a miserable time here, so the least you can do is to toast me in my time of despair...

All the best,

Steve
\end{small}
\column{0.7\textwidth}
\begin{center}
\includegraphics[width=0.8\textwidth]{./images/campana.png}
\includegraphics[width=0.65\textwidth]{./images/campana2.png}
\end{center}

\end{columns}

## Training vs. workshop

- Share your ideas and experiences
- Ask questions, it is very likely that the answers are within the participants' collective knowledge 
- Formulating best practices can also mean identifying bad practices
- Our shared goal is to obtain age estimates that are unbiased and precise

- Collective experience of workshop participants is quite vast, and sharing this experience is a goal of this workshop
- Collectively develop recommendations formulated as "best practices in age determination"
- Proceedings report to document our work and to share it with colleagues that could not attend

## Hybrid meeting format

- In person participants
  - Rotating rapporteur role
  - Use your microphone when talking
  - If wireless microphones act up, we will ask participants to put their phones on airplane mode
  
- Guidelines for MS Teams 
  - Raise hand to make an intervention
  - Turn on your camera when speaking (unless you have bandwidth issues)
  - Unmute yourself to talk
  - The chat will be monitored for questions and comments

- We will pause and repeat if there are connection issues with the external experts

## Roundtable of introductions for in person participants

- Name, position and region, mandated tasks that are making you attend this workshop, regional context

## Day 1 - Tuesday January 31 2023

\begin{tiny}
\begin{itemize}
\item{Basics of age determination by Peter Comeau (BIO)}
\item{Opening remarks by Julie Davies}
\item{\href{./preparation-storage-inventory.pdf}{Obtaining and cataloguing otoliths, preparation, storage and inventory}}

\item{Plenary talk by Tracey Loewen and Rick Wastle (DFO Central and Arctic)}

\item{Plenary talk by Stephen Wischniowski (DFO Pacific)}

\item{\href{./validation-verification-calibration.pdf}{Validation, calibration and verification}}

\item{Age determination in a production ageing environment}
  \begin{itemize}
  \begin{tiny}
  \item{Kim Emond and Hélène Dionne (IML) - Age determination of Atlantic Herring in the Québec region}
  \item{Sylvie Robichaud and Karen Robertson (GFC) - Age determination of Atlantic Herring in the Gulf region}
  \item{Tania Davignon-Burton (BIO) - Reconciling dreams, expectations and reality in a production ageing environment}
  \end{tiny}
  \end{itemize}

\item{Steps towards establishing a sclerochronology community within DFO}
\end{itemize}
\end{tiny}

##

\begin{center}
\includegraphics[width=1.0\textwidth]{./images/nice-background.png}
\end{center}


## Community building ideas

- Community of Age Reading Experts ([CARE](https://care.psmfc.org/)) as a test case
- Identify opportunities to have otolith exchanges between labs
- Develop a shared understanding of what physical and digital samples we have, and what they were/are/will be used for
- Shared references related to age determination
- The proceedings from this workshop
- ...


## Day 2 - Wednesday February 01 2023

- Morning practical sessions / tour of the GFC ageing labs

- SmartDots: a tool for annotations of otolith images, supporting otolith exchanges between labs, and quality-control of ages (Julie Davies)

- Taking good images of otoliths (Karen Robertson and others)

- Archiving of digital images and integration with SmartDots (David Fishman and Daniel Ricard)

- SmartDots reporting features - example for American Plaice reference collection (Daniel Ricard and Julie Davies)

- [Growth increment measurements from annotated otolith images (Daniel Ricard)](images-SmartDots-increments.pdf)


## Day 3 - Thursday February 02 2023

- [Growth models](./growth-models.pdf)

- Plenary talk by Andrea Perreault (NAFC)

- Plenary talk by Lisa Ailloud (NOAA NMFS SEFSC)

- [Age-length keys and catch-at-age matrices](./age-length-keys.pdf)

- CatchR: Methods developed to compute age-length keys for the northern Gulf of St. Lawrence Atlantic Cod, and prospects for other age-based assessments

- Kim Emond and Hélène Dionne (IML) - Catch-at-age of commercial herring landings and numbers-at-age from acoustics surveys

- [Past, present and future of age determination](./past-present-future.pdf)

## Recommendations on "best practices in age determination"

## Proceedings draft document

- [draft DFO Technical Report](../proceedings/_book/techreport-english.pdf)

## Summary of homework results

```{r homework0, include=FALSE}
in.df <- readxl::read_xlsx("../planning/Ageing-workshop-regional-homework-all-regions.xlsx", skip=3)
in.df$ageing.structure <- in.df$`Ageing structure`
```

```{r homework1}
library(ggplot2)
g <- ggplot(data=in.df, aes(factor(Region))) +
  geom_bar()
g
```

## Homework results - by ageing structure

```{r homework2}
g <- ggplot(data=in.df, aes(factor(ageing.structure))) +
  geom_bar()
g
```

## Homework results - timeline by stock


## Using OpenData inventory

```{r homework3}
plaice.df <- read.csv("../../fgp-datasets/otolith_collection/NAFO-4T-American-Plaice-ages.csv")
plaice.df$stock <- "DFO-American-Plaice-NAFO-4T"
witch.df <- read.csv("../../fgp-datasets/otolith_collection/NAFO-4RST-Witch-Flounder-ages.csv")
witch.df$stock <- "DFO-Witch-Flounder-NAFO-4RST"
cod.df <- read.csv("../../fgp-datasets/otolith_collection/NAFO-4TVN-Atlantic-Cod-ages.csv")
cod.df$stock <- "DFO-Atlantic-Cod-NAFO-4TVN"
hake.df <- read.csv("../../fgp-datasets/otolith_collection/NAFO-4T-White-Hake-ages.csv")
hake.df$stock <- "DFO-White-Hake-NAFO-4T"
winter.df <- read.csv("../../fgp-datasets/otolith_collection/NAFO-4T-Winter-Flounder-ages.csv")
winter.df$stock <- "DFO-Winter-Flounder-NAFO-4T"
yellowtail.df <- read.csv("../../fgp-datasets/otolith_collection/NAFO-4T-yellowtail-Flounder-ages.csv")
yellowtail.df$stock <- "DFO-Yellowtail-Flounder-NAFO-4T"

in.df <- rbind(plaice.df, witch.df, cod.df, hake.df,winter.df,yellowtail.df)
in.df$date <- in.df$year_année + (in.df$month_mois/12)
in.df$stock <- factor(in.df$stock)

par(mar=c(4,12,1,1))
plot(in.df$date, in.df$stock, cex=log(in.df$number.otoliths_nombre.otolithes)*0.2, pch=19, yaxt='n', xlab="Decimal year", ylab="")
axis(side=2, at=1:6, levels(in.df$stock), las=1)


```
